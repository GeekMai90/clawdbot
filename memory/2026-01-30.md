# 2026-01-30

## 🎬 电影技能改造（重要！）

**改造原因：** 麦先生建议将电影技能的用户数据从 JSON 改为 Markdown 存储在 Obsidian，和记账技能一样更省 token。

**混合存储方案（最终决定）：**
- 📚 **参考库（JSON）**：`skills/douban-movie/data/` - TOP250 和热门数据（数据量大，需要程序化查询）
- 📝 **用户数据（Markdown）**：`GeekMaiOB/电影/` - 观影记录（适合人类阅读编辑）

**改造内容：**
1. 重写 `movie.js` 的用户数据读写逻辑（watched/wishlist/rewatchable）
2. 创建迁移脚本 `migrate-to-obsidian.js` 并成功迁移数据
3. 更新 SKILL.md 和 TOOLS.md 文档
4. 备份旧 JSON 文件到 `data/_backup/`

**Obsidian 文件结构：**
- `2026.md` / `2027.md` - 按年分的观影记录
- `想看清单.md` - 想看的电影/剧集
- `可重看清单.md` - 值得反复看的经典

**改造收益：**
- ✅ 在 Obsidian 中可以直接查看和编辑观影记录
- ✅ 可以写详细观后感、建立笔记链接
- ✅ 省 token（Markdown 比 JSON 更紧凑）
- ✅ 未来可扩展性强（截图、引用、标签等）

**测试结果：** 所有功能正常，统计正确（包括自定义影视作品）

---

## 🧾 记账技能

- 完成并测试"记账（bookkeeping）"技能：数据存储在 Obsidian `GeekMaiOB/记账/`，按月 `YYYY-MM.md`；报销 `待报销.md`（报销后清空）；订阅 `订阅管理.md`。
- 订阅提醒 cron 已创建：`bookkeeping_subscription_reminder_0900`（每天 09:00 Asia/Shanghai，提前3天/1天/当天提醒）。
- 已记录示例：餐饮 15、数码 85；订阅 Claude Pro 20美元/月，下次续费 2026-02-28。

---

## 📺 豆瓣电影技能

- 完成并测试"豆瓣电影推荐"技能：发现模块（TOP250 + 热门/最新）与观影记录模块（想看/已看/可重看，记录模块直接记录不搜索）。
