# 方案1：剪贴板文字翻译 - 详细步骤

## 🎯 最终效果
复制 Discord 英文 → 运行快捷指令 → 看中文翻译

---

## 📱 创建步骤（iPhone/iPad）

### 1. 打开"快捷指令" App

### 2. 点击右上角 `+` 创建新快捷指令

### 3. 添加操作 - 共4步

#### 第1步：获取剪贴板
- 点击"添加操作"
- 搜索：`获取剪贴板`
- 添加该操作

#### 第2步：调用翻译 API
- 点击 `+` 添加操作
- 搜索：`获取 URL 的内容`
- 配置如下：
  
  **URL**：
  ```
  https://api.alter.com/v1/chat/completions
  ```
  ⚠️ 填你的 Alter API 端点
  
  **方法**：`POST`
  
  **请求头**（点击"显示更多" → "头"）：
  - 添加新字段1：
    - 键：`Content-Type`
    - 值：`application/json`
  - 添加新字段2：
    - 键：`Authorization`
    - 值：`Bearer sk-xxxxxxxx`（⚠️ 替换成你的 API Key）
  
  **请求体**（点击"请求体" → 选择"JSON"）：
  ```json
  {
    "model": "gpt-4o-mini",
    "messages": [
      {
        "role": "system",
        "content": "你是专业的翻译助手，将英文准确翻译成中文，保持原文语气和格式。"
      },
      {
        "role": "user",
        "content": "请翻译以下内容：\n\n剪贴板"
      }
    ],
    "temperature": 0.3,
    "max_tokens": 2000
  }
  ```
  
  ⚠️ **关键操作**：
  - 在 JSON 编辑器中，找到第二个 `"content"` 后面的 `"请翻译以下内容：\n\n剪贴板"`
  - 删除最后的 `"剪贴板"` 文字
  - 点击这个位置，会弹出变量菜单
  - 选择"剪贴板"变量（来自第1步）
  - 这样就把剪贴板内容动态插入到请求里了

#### 第3步：提取翻译结果
- 点击 `+` 添加操作
- 搜索：`从输入获取`（或"Get Dictionary Value"）
- 类型：`字典值`
- 键：`choices[0].message.content`
  - （如果找不到"键"选项，选择"获取字典值" → 手动输入这个路径）

#### 第4步：显示翻译
- 点击 `+` 添加操作
- 搜索：`显示通知` 或 `显示结果`
- 推荐用"显示结果"（可以复制）
- 内容：选择第3步的"字典值"变量

---

## ⚙️ 快捷指令设置

点击右上角 `···` → 详细信息：

1. **名称**：Discord 翻译（或随便起）
2. **图标**：选个翻译相关的（🌐 或 🔤）
3. **颜色**：选个喜欢的

### 可选高级设置：

#### 添加到分享菜单（推荐！）
- 打开"在共享表单中显示"
- 共享表单类型：`文本`
- 这样可以在 Discord 里：长按消息 → 共享 → 选"Discord 翻译"

#### 添加到主屏幕
- 点击"添加到主屏幕"
- 变成一个 App 图标，点击直接运行

#### 设置 Siri 短语
- "添加到 Siri"
- 录制短语，如："翻译这个" / "Discord 翻译"

---

## 🧪 测试步骤

1. 打开 Discord，复制一条英文消息
2. 运行快捷指令（方式任选）：
   - 打开"快捷指令" App → 点击你的快捷指令
   - 或：Siri 语音触发
   - 或：主屏幕图标
   - 或：Discord 内分享菜单
3. 稍等1-3秒
4. 看到翻译结果！

---

## ❌ 常见问题

### 1. 提示"无法连接到服务器"
- 检查 API 端点 URL 是否正确
- 检查网络连接

### 2. 返回错误信息（如 401 Unauthorized）
- 检查 API Key 是否正确
- 检查 `Authorization` 头格式：`Bearer sk-xxx`（注意有空格）

### 3. 返回空白 / 无内容
- 检查第3步的键路径是否正确：`choices[0].message.content`
- 如果 Alter 返回格式不同，可能需要调整键路径

### 4. 翻译不准确
- 调整 `system` 提示词
- 或换个更好的模型

### 5. 速度慢
- 可能是模型响应慢，试试换 `gpt-4o-mini` 或 `gemini-2.0-flash-exp`

---

## 🎨 进阶优化

### 自动检测语言（双向翻译）
修改 system prompt：
```
你是专业的翻译助手。如果输入是英文，翻译成中文；如果是中文，翻译成英文。保持原文语气和格式。
```

### 添加翻译历史
在第4步后添加：
- "追加到文件"操作
- 文件路径：`iCloud Drive/Shortcuts/翻译历史.txt`
- 内容：`原文:\n剪贴板\n\n译文:\n字典值\n\n---\n`

---

**创建时间**：2026-02-09  
**预计完成时间**：5-10分钟  
**难度**：⭐⭐☆☆☆
