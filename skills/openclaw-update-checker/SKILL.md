# OpenClaw 更新检查技能

## 用途
每天定时检查 OpenClaw 是否有新版本。如果有更新，通知麦先生并总结更新内容，等他同意后自动执行更新。

## 触发方式
- Cron Job：每天 09:00（Asia/Shanghai）
- Job 名称：`openclaw_update_check_daily`

## 检查流程

1. **获取版本信息**
   ```bash
   # 当前版本
   openclaw --version
   
   # 最新版本
   npm view openclaw version
   ```

2. **比较版本**
   - 如果版本相同，静默退出（不打扰麦先生）
   - 如果有新版本，继续下一步

3. **获取更新内容**
   - 尝试从 GitHub releases 获取 changelog
   - 或者从 npm 包信息获取更新说明
   - 如果都获取不到，只告知版本号变化

4. **通知麦先生**
   - 发送 Telegram 消息，包含：
     - 当前版本 → 最新版本
     - 更新内容摘要（如果有）
     - 询问是否更新

5. **执行更新**（需要麦先生同意）
   - 使用 `gateway.update.run` 执行更新
   - 更新完成后自动重启

## 消息模板

```
🔄 OpenClaw 有新版本啦！

当前版本：2026.2.9
最新版本：2026.2.10

📋 更新内容：
- xxx
- xxx

要现在更新吗？更新后会自动重启服务。
```

## 注意事项
- 只在有新版本时通知，避免打扰
- 更新需要麦先生明确同意
- 更新后 Gateway 会自动重启
